{
    "case_id": "case-994",
    "repo_name": "wkentaro/labelme",
    "file_path": "labelme/__main__.py",
    "code_snippet": "\n\ndef main():\n\n    parser = argparse.ArgumentParser()\n\n    parser.add_argument(\"--version\", \"-V\", action=\"store_true\", help=\"show version\")\n\n    parser.add_argument(\"--reset-config\", action=\"store_true\", help=\"reset qt config\")\n\n    parser.add_argument(\n\n        \"--logger-level\",\n\n        default=\"debug\",\n\n        choices=[\"debug\", \"info\", \"warning\", \"fatal\", \"error\"],\n\n        help=\"logger level\",\n\n    )\n\n    parser.add_argument(\"filename\", nargs=\"?\", help=\"image or label filename\")\n\n    parser.add_argument(\n\n        \"--output\",\n\n        \"-O\",\n\n        \"-o\",\n\n        help=\"output file or directory (if it ends with .json it is \"\n\n        \"recognized as file, else as directory)\",\n\n    )\n\n    default_config_file = os.path.join(os.path.expanduser(\"~\"), \".labelmerc\")\n\n    parser.add_argument(\n\n        \"--config\",\n\n        dest=\"config\",\n\n        help=\"config file or yaml-format string (default: {})\".format(\n\n            default_config_file\n\n        ),\n\n        default=default_config_file,\n\n    )\n\n    # config for the gui\n\n    parser.add_argument(\n\n        \"--nodata\",\n\n        dest=\"store_data\",\n\n        action=\"store_false\",\n\n        help=\"stop storing image data to JSON file\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--autosave\",\n\n        dest=\"auto_save\",\n\n        action=\"store_true\",\n\n        help=\"auto save\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--nosortlabels\",\n\n        dest=\"sort_labels\",\n\n        action=\"store_false\",\n\n        help=\"stop sorting labels\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--flags\",\n\n        help=\"comma separated list of flags OR file containing flags\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--labelflags\",\n\n        dest=\"label_flags\",\n\n        help=r\"yaml string of label specific flags OR file containing json \"\n\n        r\"string of label specific flags (ex. {person-\\d+: [male, tall], \"\n\n        r\"dog-\\d+: [black, brown, white], .*: [occluded]})\",  # NOQA\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--labels\",\n\n        help=\"comma separated list of labels OR file containing labels\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--validatelabel\",\n\n        dest=\"validate_label\",\n\n        choices=[\"exact\"],\n\n        help=\"label validation types\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--keep-prev\",\n\n        action=\"store_true\",\n\n        help=\"keep annotation of previous frame\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    parser.add_argument(\n\n        \"--epsilon\",\n\n        type=float,\n\n        help=\"epsilon to find nearest vertex on canvas\",\n\n        default=argparse.SUPPRESS,\n\n    )\n\n    args = parser.parse_args()\n\n\n\n    if args.version:\n\n        print(\"{0} {1}\".format(__appname__, __version__))\n\n        sys.exit(0)\n\n\n\n    logger.setLevel(getattr(logging, args.logger_level.upper()))\n\n\n\n    if hasattr(args, \"flags\"):\n\n        if os.path.isfile(args.flags):\n\n            with codecs.open(args.flags, \"r\", encoding=\"utf-8\") as f:\n\n                args.flags = [line.strip() for line in f if line.strip()]\n\n        else:\n\n            args.flags = [line for line in args.flags.split(\",\") if line]\n\n\n\n    if hasattr(args, \"labels\"):\n\n        if os.path.isfile(args.labels):\n\n            with codecs.open(args.labels, \"r\", encoding=\"utf-8\") as f:\n\n                args.labels = [line.strip() for line in f if line.strip()]\n\n        else:\n\n            args.labels = [line for line in args.labels.split(\",\") if line]\n\n\n\n    if hasattr(args, \"label_flags\"):\n\n        if os.path.isfile(args.label_flags):\n\n            with codecs.open(args.label_flags, \"r\", encoding=\"utf-8\") as f:\n\n                args.label_flags = yaml.safe_load(f)\n\n        else:\n\n            args.label_flags = yaml.safe_load(args.label_flags)\n\n\n\n    config_from_args = args.__dict__\n\n    config_from_args.pop(\"version\")\n\n    reset_config = config_from_args.pop(\"reset_config\")\n\n    filename = config_from_args.pop(\"filename\")\n\n    output = config_from_args.pop(\"output\")\n\n    config_file_or_yaml = config_from_args.pop(\"config\")\n\n    config = get_config(config_file_or_yaml, config_from_args)\n\n\n\n    if not config[\"labels\"] and config[\"validate_label\"]:\n\n        logger.error(\n\n            \"--labels must be specified with --validatelabel or \"\n\n            \"validate_label: true in the config file \"\n\n            \"(ex. ~/.labelmerc).\"\n\n        )\n\n        sys.exit(1)\n\n\n\n    output_file = None\n\n    output_dir = None\n\n    if output is not None:\n\n        if output.endswith(\".json\"):\n\n            output_file = output\n\n        else:\n\n            output_dir = output\n\n\n\n    translator = QtCore.QTranslator()\n\n    translator.load(\n\n        QtCore.QLocale.system().name(),\n\n        osp.dirname(osp.abspath(__file__)) + \"/translate\",\n\n    )\n\n    app = QtWidgets.QApplication(sys.argv)\n\n    app.setApplicationName(__appname__)\n\n    app.setWindowIcon(newIcon(\"icon\"))\n\n    app.installTranslator(translator)\n\n    win = MainWindow(\n\n        config=config,\n\n        filename=filename,\n\n        output_file=output_file,\n\n        output_dir=output_dir,\n\n    )\n\n\n\n    if reset_config:\n\n        logger.info(\"Resetting Qt config: %s\" % win.settings.fileName())\n\n        win.settings.clear()\n\n        sys.exit(0)\n\n\n\n    win.show()\n\n    win.raise_()\n\n    sys.exit(app.exec_())\n",
    "line_range": [
        18,
        182
    ],
    "command_specific_fields": {
        "method_name": "main"
    },
    "language": "python",
    "commit": "aca3e64545f55c886760694981df634ae6eb1f32",
    "prompt": ""
}