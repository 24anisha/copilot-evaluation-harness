{
    "case_id": "case-1697",
    "repo_name": "python-hyper/rfc3986",
    "file_path": "src/rfc3986/_mixin.py",
    "code_snippet": "        return tuple(self.normalize()) == tuple(other_ref.normalize())\n\n    def resolve_with(  # noqa: C901\n        self,\n        base_uri: t.Union[str, \"uri.URIReference\"],\n        strict: bool = False,\n    ) -> _Self:\n        \"\"\"Use an absolute URI Reference to resolve this relative reference.\n\n        Assuming this is a relative reference that you would like to resolve,\n        use the provided base URI to resolve it.\n\n        See http://tools.ietf.org/html/rfc3986#section-5 for more information.\n\n        :param base_uri: Either a string or URIReference. It must be an\n            absolute URI or it will raise an exception.\n        :returns: A new URIReference which is the result of resolving this\n            reference using ``base_uri``.\n        :rtype: :class:`URIReference`\n        :raises rfc3986.exceptions.ResolutionError:\n            If the ``base_uri`` does not at least have a scheme.\n        \"\"\"\n        if not isinstance(base_uri, URIMixin):\n            base_uri = type(self).from_string(base_uri)\n\n        if t.TYPE_CHECKING:\n            base_uri = t.cast(uri.URIReference, base_uri)\n\n        try:\n            self._validator.validate(base_uri)\n        except exc.ValidationError:\n            raise exc.ResolutionError(base_uri)\n\n        # This is optional per\n        # http://tools.ietf.org/html/rfc3986#section-5.2.1\n        base_uri = base_uri.normalize()\n\n        # The reference we're resolving\n        resolving = self\n\n        if not strict and resolving.scheme == base_uri.scheme:\n            resolving = resolving.copy_with(scheme=None)\n\n        # http://tools.ietf.org/html/rfc3986#page-32\n        if resolving.scheme is not None:\n            target = resolving.copy_with(\n                path=normalizers.normalize_path(resolving.path)\n            )\n        else:\n            if resolving.authority is not None:\n                target = resolving.copy_with(\n                    scheme=base_uri.scheme,\n                    path=normalizers.normalize_path(resolving.path),\n                )\n            else:\n                if resolving.path is None:\n                    if resolving.query is not None:\n                        query = resolving.query\n                    else:\n                        query = base_uri.query\n                    target = resolving.copy_with(\n                        scheme=base_uri.scheme,\n                        authority=base_uri.authority,\n                        path=base_uri.path,\n                        query=query,\n                    )\n                else:\n                    if resolving.path.startswith(\"/\"):\n                        path = normalizers.normalize_path(resolving.path)\n                    else:\n                        path = normalizers.normalize_path(\n                            misc.merge_paths(base_uri, resolving.path)\n                        )\n                    target = resolving.copy_with(\n                        scheme=base_uri.scheme,\n                        authority=base_uri.authority,\n                        path=path,\n                        query=resolving.query,\n                    )\n        return target\n",
    "line_range": [
        272,
        351
    ],
    "command_specific_fields": {
        "method_name": "resolve_with"
    },
    "language": "python",
    "commit": "75e77baed146976442bb11d4adda0eb322c6a6b5",
    "prompt": ""
}