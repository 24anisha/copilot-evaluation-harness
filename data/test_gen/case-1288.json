{
    "case_id": "case-0",
    "repo_name": "lra/mackup",
    "file_path": "mackup/application.py",
    "code_snippet": "        for filename in self.files:\n            (home_filepath, mackup_filepath) = self.getFilepaths(filename)\n\n            \n            \n            \n            file_or_dir_exists = os.path.isfile(mackup_filepath) or os.path.isdir(\n                mackup_filepath\n            )\n            pointing_to_mackup = (\n                os.path.islink(home_filepath)\n                and os.path.exists(mackup_filepath)\n                and os.path.samefile(mackup_filepath, home_filepath)\n            )\n            supported = utils.can_file_be_synced_on_current_platform(filename)\n\n            if file_or_dir_exists and not pointing_to_mackup and supported:\n                if self.verbose:\n                    print(\n                        \"Restoring\\n  linking {}\\n  to      {} ...\".format(\n                            home_filepath, mackup_filepath\n                        )\n                    )\n                else:\n                    print(\"Restoring {} ...\".format(filename))\n\n                if self.dry_run:\n                    continue\n\n                \n                if os.path.exists(home_filepath):\n                    \n                    if os.path.isfile(home_filepath):\n                        file_type = \"file\"\n                    elif os.path.isdir(home_filepath):\n                        file_type = \"folder\"\n                    elif os.path.islink(home_filepath):\n                        file_type = \"link\"\n                    else:\n                        raise ValueError(\"Unsupported file: {}\".format(mackup_filepath))\n\n                    if utils.confirm(\n                        \"You already have a {} named {} in your\"\n                        \" home.\\nDo you want to replace it with\"\n                        \" your backup?\".format(file_type, filename)\n                    ):\n                        utils.delete(home_filepath)\n                        utils.link(mackup_filepath, home_filepath)\n                else:\n                    utils.link(mackup_filepath, home_filepath)\n            elif self.verbose:\n                if os.path.exists(home_filepath):\n                    print(\n                        \"Doing nothing\\n  {}\\n  already linked by\\n  {}\".format(\n                            mackup_filepath, home_filepath\n                        )\n                    )\n                elif os.path.islink(home_filepath):\n                    print(\n                        \"Doing nothing\\n  {}\\n  \"\n                        \"is a broken link, you might want to fix it.\".format(\n                            home_filepath\n                        )\n                    )\n                else:\n                    print(\n                        \"Doing nothing\\n  {}\\n  does not exist\".format(mackup_filepath)\n                    )",
    "line_range": [
        136,
        220
    ],
    "command_specific_fields": {
        "method_name": "restore"
    },
    "language": "python",
    "commit": "0def08b8543ac3a436257cce4426a5b109b31a2d"
}