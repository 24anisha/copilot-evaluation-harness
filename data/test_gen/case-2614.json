{
    "case_id": "case-2614",
    "repo_name": "apolloconfig/apollo",
    "file_path": "apollo-configservice/src/main/java/com/ctrip/framework/apollo/configservice/service/AppNamespaceServiceWithCache.java",
    "line_range": [
        132,
        151
    ],
    "command_specific_fields": {
        "method_name": "afterPropertiesSet"
    },
    "language": "java",
    "commit": "6de040a2b9bc68d32c95045de00e21f55f20122b",
    "code_snippet": "  @Override\n  public void afterPropertiesSet() throws Exception {\n    populateDataBaseInterval();\n    scanNewAppNamespaces(); //block the startup process until load finished\n    scheduledExecutorService.scheduleAtFixedRate(() -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.AppNamespaceServiceWithCache\",\n          \"rebuildCache\");\n      try {\n        this.updateAndDeleteCache();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Rebuild cache failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, rebuildInterval, rebuildInterval, rebuildIntervalTimeUnit);\n    scheduledExecutorService.scheduleWithFixedDelay(this::scanNewAppNamespaces, scanInterval,\n        scanInterval, scanIntervalTimeUnit);\n  }\n"
}