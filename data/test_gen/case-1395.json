{
    "case_id": "case-1395",
    "repo_name": "ranger/ranger",
    "file_path": "ranger/ext/img_display.py",
    "code_snippet": "        #       supports it\n        cmds = {'a': 'd', 'i': self.image_id}\n        for cmd_str in self._format_cmd_str(cmds):\n            self.stdbout.write(cmd_str)\n        self.stdbout.flush()\n        # kitty doesn't seem to reply on deletes, checking like we do in draw()\n        # will slows down scrolling with timeouts from select\n        self.image_id = max(0, self.image_id - 1)\n        self.fm.ui.win.redrawwin()\n        self.fm.ui.win.refresh()\n\n    def _format_cmd_str(self, cmd, payload=None, max_slice_len=2048):\n        central_blk = ','.join([\"{k}={v}\".format(k=k, v=v)\n                                for k, v in cmd.items()]).encode('ascii')\n        if payload is not None:\n            # we add the m key to signal a multiframe communication\n            # appending the end (m=0) key to a single message has no effect\n            while len(payload) > max_slice_len:\n",
    "line_range": [
        867,
        884
    ],
    "command_specific_fields": {
        "method_name": "_format_cmd_str"
    },
    "language": "python",
    "commit": "80baec602c32208fc3c8a979ce48db53ccdd6725",
    "prompt": ""
}