{
    "case_id": "case-515",
    "repo_name": "kelektiv/node-cron",
    "file_path": "src/time.ts",
    "code_snippet": "\t\t\t\tconst wasStepDefined = mStep !== undefined;\n\t\t\t\tconst step = parseInt(mStep ?? '1', 10);\n\t\t\t\tif (step === 0) {\n\t\t\t\t\tthrow new CronError(`Field (${unit}) has a step of zero`);\n\t\t\t\t}\n\n\t\t\t\tif (upper !== undefined && lower > upper) {\n\t\t\t\t\tthrow new CronError(`Field (${unit}) has an invalid range`);\n\t\t\t\t}\n\n\t\t\t\tconst isOutOfRange =\n\t\t\t\t\tlower < low ||\n\t\t\t\t\t(upper !== undefined && upper > high) ||\n\t\t\t\t\t(upper === undefined && lower > high);\n\n\t\t\t\tif (isOutOfRange) {\n\t\t\t\t\tthrow new CronError(`Field value (${value}) is out of range`);\n\t\t\t\t}\n\n\t\t\t\t// Positive integer higher than constraints[0]\n\t\t\t\tlower = Math.min(Math.max(low, ~~Math.abs(lower)), high);\n\n\t\t\t\t// Positive integer lower than constraints[1]\n\t\t\t\tif (upper !== undefined) {\n\t\t\t\t\tupper = Math.min(high, ~~Math.abs(upper));\n\t\t\t\t} else {\n\t\t\t\t\t// If step is provided, the default upper range is the highest value\n\t\t\t\t\tupper = wasStepDefined ? high : lower;\n\t\t\t\t}\n\n\t\t\t\t// Count from the lower barrier to the upper\n\t\t\t\t// forcing type cast here since we checked above that\n\t\t\t\t// we are between constraint bounds\n\t\t\t\tpointer = lower as typeof pointer;\n\n\t\t\t\tdo {\n\t\t\t\t\ttypeObj[pointer] = true; // mutates the field objects values inside CronTime\n\t\t\t\t\tpointer += step;\n\t\t\t\t} while (pointer <= upper);\n\n\t\t\t\t// merge day 7 into day 0 (both Sunday), and remove day 7\n\t\t\t\t// since we work with day-of-week 0-6 under the hood\n\t\t\t\tif (unit === 'dayOfWeek') {\n\t\t\t\t\tif (!typeObj[0] && !!typeObj[7]) typeObj[0] = typeObj[7];\n\t\t\t\t\tdelete typeObj[7];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new CronError(`Field (${unit}) cannot be parsed`);\n\t\t\t}\n\t\t}\n\t}\n}\n",
    "line_range": [
        745,
        828
    ],
    "command_specific_fields": {
        "method_name": "_parseField"
    },
    "language": "typescript",
    "commit": "1eb978b8cddf8a2f2bead841adcad408238333c6",
    "prompt": ""
}